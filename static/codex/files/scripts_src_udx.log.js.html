<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>scripts/src/udx.log.js - usabilitydynamics/lib-utility</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="usabilitydynamics/lib-utility"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Utility.html">Utility</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/event.html">event</a></li>
            
                <li><a href="../modules/ud.html">ud</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: scripts/src/udx.log.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * UD Global
 *
 * Initial global object extended by product-specific globals.
 *
 * @version 1.0
 * @description UD Global
 * @package UD
 * @dependencies jquery, ud.loader
 * @author team@UD
 */
/* Create UD Global by merging with UD (if exists) */
jQuery.extend( true, ud, {

  /* Slug for Default Scope */
  scope: &#x27;ud&#x27;,


  /* Global setting. Should be overwritten by child */
  developer_mode: true,


  /* Configuration of which debug messages to display, if any */
  console_options: { show_log: true },


  /* Contains i18n strings */
  strings: {},


  /* Central location for timers */
  timers: {},


  /* Utility Functions */
  utils: {

    /**
     * Deep Data Type Conversion of an Object
     *
     * @since 2.0
     * @author potanin@UD
     */
    type_fix: function( object, args ) {

      jQuery.extend( args, { &#x27;null&#x27;: true });

      try {

        var fix = function( value ) {
          switch( typeof value ) {
            case &#x27;string&#x27;: switch(  value ) { case &#x27;false&#x27;: value = false; break; case &#x27;true&#x27;: value = true; break; case &#x27;&#x27;: value = ( args.nullify ? null : value ); break; } break;
            case &#x27;number&#x27;: value = parseFloat( value ); break;
            case &#x27;object&#x27;: value = dig( value ); break;
          } return value;
        }

        var dig = function( object ) {
          if( typeof object !== &#x27;object&#x27; ) { return fix( object );  }
          for( key in object ) { object[ key ] = fix( object[ key ] ); };
          return object;
        }

      } catch ( e ) {}

      return dig( object );

    }

  },


  /**
   * Throw a Warning (Not Fatal Error)
   *
   * WIP.
   *
   * @since 2.0
   * @author potanin@UD
   */
  warning: function() {
    if( typeof console.warn === &#x27;function&#x27; ) {
      console.warn( arguments[0] );
      return arguments[0];
    }
  },


  /**
   * Internal logging function.
   *
   * Basic Usage:
   * - ud.log( &#x27;I need a shower.&#x27; );
   * - ud.log( &#x27;There is no water.&#x27;, &#x27;error&#x27; );
   * - ud.log( { some: &#x27;information&#x27; } );
   * - ud.log( new Error( &#x27;Error message.&#x27;) );
   *
   * Advanced Usage:
   * - ud.log( &#x27;As long as the second variable is not a string, all additional variables will be added to the log:&#x27;, { one: &#x27;test&#x27;, two: &#x27;test&#x27; }, { puppies: &#x27;yes&#x27;, kittens : &#x27;no&#x27; }, 7, 2 );
   * - ud.log( cat === big , &#x27;If we have a small cat, this message will not be displayed at all. When first variable is a boolean, it must be true for rest of variables to be displayed..&#x27; );
   *
   * @author potanin@UD
   */
  log: function ( notice, type, override ) {
    var self = this;

    /* If notice is an error, we strip out the message, send to console, and then return the error object */
    if( notice instanceof Error &amp;&amp; typeof console.error === &#x27;object&#x27; ) {
      console.error( notice.message, { &#x27;Error&#x27;: notice, &#x27;Stack&#x27;: ( typeof notice.stack === &#x27;string&#x27; ? notice.stack.split( &quot;\n&quot; ) : null ) } );
      return notice;
    }

    if( !window.console || ( !override &amp;&amp; ( !self.developer_mode || !window.console ) ) || typeof notice === &#x27;boolean&#x27; &amp;&amp; !notice ) { return false; }
    
    /* Prevent logs in IE because of issues. */
    if( self.browser_detect( &#x27;browser&#x27; ) == &#x27;Explorer&#x27; ) { return false; }

    self.log.console = {
      log: function( args ) {
        switch( args.type ) {
          case &#x27;info&#x27;: return self.log.console.info( args ); break;
          case &#x27;error&#x27;: return self.log.console.error( args ); break;
          case &#x27;dir&#x27;: return self.log.console.error( args ); break;
          case &#x27;warn&#x27;: return self.log.console.warn( args ); break;
          default: return ( self.console_options &amp;&amp; self.console_options.show_log ) ? console.log.apply( console, args.items ) : false; break;
        }
      },
      info: function( args ) { return console.info.apply( console, args.items ); },
      error: function( args ) { return console.error.apply( console, args.items ); },
      dir: function( args ) { return console.dir.apply( console, args.items ); },
      warn: function( args ) { return console.warn.apply( console, args.items ); }
    }

    return self.log.console.log({
      items: [  self.scope + &#x27;::&#x27;  ].concat( jQuery.makeArray( typeof notice === &#x27;string&#x27; &amp;&amp; typeof type === &#x27;object&#x27; ? arguments : [ notice ] ) ),
      type: ( typeof type === &#x27;string&#x27; ? type : &#x27;log&#x27; )
    });

  },


  /**
   * Add Remove Notification support.
   *
   * @author peshkov@UD
   */
  get_service: function( service, callback, args ) {
    &#x27;use strict&#x27;; this.log( this.scope + &#x27;.get_service()&#x27;, arguments );

    if( typeof callback !== &#x27;function&#x27; ) {
      return false;
    }

    // try { } catch( error ) { }

    this.ajax( &#x27;get_api_service&#x27;, { service: service, args: args }, function( response ) {
      callback( response );
    });

  },


  /**
   * WPP AJAX Handler
   *
   * Example: [scope].ajax( &#x27;some_action&#x27;, { arg: value }, function() {  } );
   *
   */
  ajax: function( this_action, ajax_args, callback, args ) {
    &#x27;use strict&#x27;; /* this.log( this.scope + &#x27;.ajax()&#x27; , arguments ); */

    if( !ajaxurl ) {
      return false;
    }

    var self = this;

    /**
     * Perform standard UI operations, error handling and standardize response object.
     *
     */
    var response = function( jqXHR ) {
      &#x27;use strict&#x27;; // this.log( this.scope + &#x27;ajax.response()&#x27;, arguments );

      var result = {};

      try {

        result.response_text = jQuery.parseJSON( jqXHR.responseText );

        if( typeof result.response_text !== &#x27;object&#x27; || jqXHR.responseText === &#x27;&#x27; ) {
          throw new Error( self.strings.ajax_response_empty );
        }

        if( jqXHR.status === 500 ) {
          throw new Error( self.strings.internal_server_error );
        }

      } catch( error ) {
        error.message = &#x27;AJAX Error: &#x27; + ( error.message ? error.message : &#x27;Unknown.&#x27; );
        result.response_text = { success: false, message: error.message }
      }

      result = jQuery.extend( true, {
        success: false,
        status: jqXHR.status
      }, result.response_text );

      if( jqXHR.statusText === &#x27;timeout&#x27; ) {
        result.status = 408;
        result.response_text = result.response_text ? result.response_text : self.strings.server_timeout;
      }

      callback( result );

    };

    return jQuery.ajax( args = jQuery.extend( true, {
      url: ajaxurl + &#x27;?action=&#x27; + self.scope + &#x27;_&#x27; + this_action,
      data: jQuery.extend( true, { args: ajax_args }, typeof data === &#x27;object&#x27; ? data : {} ),
      dataType: &#x27;json&#x27;,
      type: &#x27;POST&#x27;,
      async: true,
      timeout: ( ( typeof self.server === &#x27;object&#x27; ? self.server.max_execution_time : 30 ) - 10 ) * 1000,
      beforeSend: function ( xhr ) {
        jQuery( document ).trigger( self.scope + &#x27;.ajax.beforeSend&#x27; );
        xhr.overrideMimeType( &#x27;application/json; charset=utf-8&#x27; );
      },
      complete: function( jqXHR ) {
        response( jqXHR );
      },
      error: function( jqXHR, textStatus, errorThrown ) {
      }
    }, typeof args === &#x27;object&#x27; ? args : {} ) );

  },


  /**
   * Applies filter for the passed object
   *
   * @param name. string. required. Name of filter
   * @param obj. object. required. Object which will go through called filter
   * @author peshkov@UD
   */
  apply_filter: function( name, obj ) {
  
    /* Filter&#x27;s name and callback are required */
    if( typeof obj === &#x27;undefined&#x27; || typeof name === &#x27;undefined&#x27; || typeof name !== &#x27;string&#x27; ) return obj;
    /* jQuery must be inititialized */
    if( typeof jQuery === &#x27;undefined&#x27; ) return obj;
    /* Called filter must exist */
    if( typeof window.__ud_filters === &#x27;undefined&#x27; || typeof window.__ud_filters[ name ] === &#x27;undefined&#x27; ) return obj;

    jQuery.each( window.__ud_filters[ name ], function( i, e ) {
      if( typeof e === &#x27;function&#x27; ) {
        obj = e( obj );
      } else if ( typeof e === &#x27;object&#x27; ) {
        if( typeof obj !== &#x27;object&#x27; ) return false;
        obj = jQuery.extend( true, obj, e );
      }
    } );
    return obj;
  },


  /**
   * Adds filter to filters array.
   *
   * @param name. string. required. Name of filter.
   * @param calback. object|function. required. Filter which will be used on filter applying
   * @author peshkov@UD
   */
  add_filter: function( name, callback ) {
    /* Filter&#x27;s name and callback are required */
    if( typeof callback === &#x27;undefined&#x27; || typeof name === &#x27;undefined&#x27; || typeof name !== &#x27;string&#x27; ) return;
    /* Add object to filter */
    if( typeof window.__ud_filters === &#x27;undefined&#x27; ) window.__ud_filters = {};
    if( typeof window.__ud_filters[ name ] === &#x27;undefined&#x27; ) window.__ud_filters[ name ] = [];
    window.__ud_filters[ name ].push( callback );
  },


  /**
   * Basic URL Validation
   *
   */
  validate_url: function( string ) {
    var validation_regex = new RegExp( &quot;^(http|https|ftp)\://([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&amp;amp;%\$\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(\:[0-9]+)*(/($|[a-zA-Z0-9\.\,\?\&#x27;\\\+&amp;amp;%\$#\=~_\-]+))*$&quot;);
    return validation_regex.test( string );
  },


  /**
   * Creates slug from the string.
   *
   * @param string slug
   * @return string
   */
  create_slug: function( slug ) {
    if( typeof slug !== &#x27;string&#x27; ) return false;
    slug = slug.replace(/[^a-zA-Z0-9_\s]/g,&quot;&quot;);
    slug = slug.toLowerCase();
    slug = slug.replace(/\s/g,&#x27;_&#x27;);
    return slug;
  },
  
  /**
   * Detects client&#x27;s browser
   * 
   * Get Browser name: self.browser_detect( &#x27;browser&#x27; )
   * Get Browser version: self.browser_detect( &#x27;version&#x27; )
   * Get OS name: self.browser_detect( &#x27;OS&#x27; )
   * 
   * @author peshkov@UD
   */
  browser_detect: function( query ) {
    if ( typeof query === &#x27;undefined&#x27; ) return false;
    
    if ( typeof window._ud_browser_detect === &#x27;undefined&#x27; ) {
      window._ud_browser_detect = {
        init: function () {
          this.browser = this.searchString(this.dataBrowser) || &quot;An unknown browser&quot;;
          this.version = this.searchVersion(navigator.userAgent)
            || this.searchVersion(navigator.appVersion)
            || &quot;an unknown version&quot;;
          this.OS = this.searchString(this.dataOS) || &quot;an unknown OS&quot;;
        },
        searchString: function (data) {
          for (var i=0;i&lt;data.length;i++)	{
            var dataString = data[i].string;
            var dataProp = data[i].prop;
            this.versionSearchString = data[i].versionSearch || data[i].identity;
            if (dataString) {
              if (dataString.indexOf(data[i].subString) != -1)
                return data[i].identity;
              }
            else if (dataProp)
              return data[i].identity;
          }
        },
        searchVersion: function (dataString) {
          var index = dataString.indexOf(this.versionSearchString);
          if (index == -1) return;
          return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
        },
        dataBrowser: [
          { string: navigator.userAgent, subString: &quot;Chrome&quot;, identity: &quot;Chrome&quot; },
          { string: navigator.userAgent, subString: &quot;OmniWeb&quot;, versionSearch: &quot;OmniWeb/&quot;, identity: &quot;OmniWeb&quot; },
          { string: navigator.vendor, subString: &quot;Apple&quot;, identity: &quot;Safari&quot;, versionSearch: &quot;Version&quot; },
          { prop: window.opera, identity: &quot;Opera&quot;, versionSearch: &quot;Version&quot; },
          { string: navigator.vendor, subString: &quot;iCab&quot;, identity: &quot;iCab&quot; },
          { string: navigator.vendor, subString: &quot;KDE&quot;, identity: &quot;Konqueror&quot; },
          { string: navigator.userAgent, subString: &quot;Firefox&quot;, identity: &quot;Firefox&quot; },
          { string: navigator.vendor, subString: &quot;Camino&quot;, identity: &quot;Camino&quot; },
          { string: navigator.userAgent, subString: &quot;Netscape&quot;, identity: &quot;Netscape&quot; },
          { string: navigator.userAgent, subString: &quot;MSIE&quot;, identity: &quot;Explorer&quot;, versionSearch: &quot;MSIE&quot; },
          { string: navigator.userAgent, subString: &quot;Gecko&quot;, identity: &quot;Mozilla&quot;, versionSearch: &quot;rv&quot; },
          { string: navigator.userAgent, subString: &quot;Mozilla&quot;, identity: &quot;Netscape&quot;, versionSearch: &quot;Mozilla&quot; }
        ],
        dataOS : [
          { string: navigator.platform, subString: &quot;Win&quot;, identity: &quot;Windows&quot; },
          { string: navigator.platform, subString: &quot;Mac&quot;, identity: &quot;Mac&quot; },
          { string: navigator.userAgent, subString: &quot;iPhone&quot;, identity: &quot;iPhone/iPod&quot; },
          { string: navigator.platform, subString: &quot;Linux&quot;, identity: &quot;Linux&quot; }
        ]
      }
      window._ud_browser_detect.init();
    }
    return typeof window._ud_browser_detect[ query ] !== &#x27;undefined&#x27; ? window._ud_browser_detect[ query ] : false;
  }

});


/**
 * Adds indexOf if it doesn&#x27;t exist
 * IE8 and less doesn&#x27;t support indexOf
 *
 */
if( !Array.prototype.indexOf ) {
  Array.prototype.indexOf = function(obj, start) {
    for (var i = (start || 0), j = this.length; i &lt; j; i++) {
      if (this[i] === obj) { return i; }
    }
    return -1;
  }
}

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
